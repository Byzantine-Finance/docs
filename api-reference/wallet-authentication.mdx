---
title: "Wallet authentication"
description: "Methods to ensure user ownership over their wallet."
---

When a user account is created in Byzantine, either they themselves or their entity are set up with a digital wallet. This wallet is linked to either the end user's device or email address, meaning no intermediaries (Byzantine or the integrator) could ever make transactions on their behalf.

## Authentication methods

Integrators have two options when creating a user account. This method will be used in the future to authenticate the user when making transactions.

| Auth Method | Description |
| --- | --- |
| OTP via email | This method is easier to implement, but is a little less secure, since it relies on access to the end user's email account. |
| Passkey | This method is more cryptographically secure, since it directly links the end user's device to authentication, but is a bit more technically challenging to implement. |

## Technical implementation

<Tabs>
  <Tab title="OTP Auth">
    **Setup:**

    User does not need to do anything to set up this method.

    **Authentication flow:**

    1. **Prepare the transaction:** The user calls the `/query/init-[action]` endpoint to receive an OTP via email.
    2. **Authenticate with OTP:** The user will receive an OTP code via email and needs to enter it in the user interface.
    3. **Complete the transaction:** The user calls the `/submit/send-transaction-otp` endpoint to sign and execute the transaction with the OTP code.

  </Tab>
  <Tab title="Passkey Auth">
    **Setup:**

    By choosing this method, the user will be prompted to add their passkey to their device, either through the browser's built-in passkey management, through a third-party passkey manager, or through their mobile device's passkey management.

    This passkey will be used to authenticate the user when making transactions. A same user can have multiple passkeys, and can use different passkeys for different purposes.

    **Authentication flow:**

    1. **Prepare the transaction:** The user calls the `/query/get-[action]` endpoint to receive the passkey authentication options.
    2. **Authenticate with passkey:** The user will be prompted to authenticate with their device's passkey previously added (finger print, face recognition, etc.).
    3. **Complete the transaction:** The user calls the `/submit/send-transaction-passkey` endpoint to sign and execute the transaction with the passkey.

    You can use our Integrator SDK to easily implement the passkey authentication for your users.

    #### Installation

    ```bash
    npm install @byzantine/integrator-sdk
    ```

    #### Initialize the Byzantine Client

    ```typescript
    import { ByzantineClient } from '@byzantine/integrator-sdk';

    // Prepare the webauthn stamper configuration
    const webauthnStamperConfig: TWebauthnStamperConfig = {
        // The RPID ("Relying Party ID") for your origin.
        // For an origin named "https://www.example.com", the RPID is typically "example.com".
        // If you're testing on localhost, the RPID should be "localhost".
        rpId: string;
        // Optional timeout value. Defaults to 5 minutes.
        timeout?: number;
        // Optional override for UV flag. Defaults to "preferred".
        userVerification?: UserVerificationRequirement;
        // The credential ID generated by user at the creation of the passkey
        credentialIds?: string[];
    };

    const client = new ByzantineClient({
      webauthn: webauthnStamperConfig,
    });
    ```

    #### Usage example

    ```typescript
    const payload = {
      // Your request payload
    };

    // Generate the webauthn stamp 
    const stapm = await client.webauthn.getStamp(payload);

    // Use the webAuthnStamp headers in your API call
    const response = await fetch(
      "https://api.byzantine.fi/v1/submit/send-transaction-passkey?chain_id=1",
      {
        signedBody: payload,
        transactionId: "transaction-id",
        webAuthnStamp: stamp,
      }
    );
    ```

  </Tab>
</Tabs>

